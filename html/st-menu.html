<!DOCTYPE html>
<html lang="en">

<head>
    <title>test menu</title>
    <link rel="stylesheet" href="st-menu.css">
</head>

<body>
    <h3 class="landmark heading">Tag priority</h3>
    <fieldset class="tpf__menu tpf__filters">
        <legend>Tag priority:</legend> <!--is this redundant?-->
        <dl>
            <dt class="tpf__filter-head expanded">
                <button type="button" class="expander" aria-expanded="false" aria-controls="tpf__menu-content">
                    Tag priority
                </button>
                <button type="button" id="tpf__filter-toggle" class="current" aria-pressed="true">On</button>
            </dt>
            <dd id="tpf__menu-content" class="expandable">
                <section class="tpf__wrap" aria-describedby="tpf__header-include">
                    <div class="tpf__head">
                        <h4 id="tpf__header-include">Include</h4> (at least one)
                        <button type="button" class="question" aria-label="help">?</button>
                    </div>
                    <section class="tpf__tag-block include characters">
                        <label id="tpf__include-chars">
                            <input type="checkbox">
                            <span class="indicator" aria-hidden="true"></span>
                            <span id="block-include-chars"><span class="landmark">Include </span>Characters</span>
                        </label>
                        <textarea class="tpf__tag-list" rows="5" autocomplete="off" autocapitalize="off"
                            spellcheck="false" placeholder="Gilgamesh, Enkidu"></textarea>
                        <label class="tpf__within">...within the first <input type="text" class="tpf__tag-lim">
                            tags</label>
                    </section>
                    <section class="tpf__tag-block include relationships">
                        <label>
                            <input type="checkbox">
                            <span class="indicator" aria-hidden="true"></span>
                            <span><span class="landmark">Include </span>Relationships</span>
                        </label>
                        <textarea class="tpf__tag-list" rows="5" autocomplete="off" autocapitalize="off"
                            spellcheck="false" placeholder="Gilgamesh*Enkidu, Enkidu*Gilgamesh"></textarea>
                        <label class="tpf__within">...within the first <input type="text" class="tpf__tag-lim">
                            tags</label>
                    </section>
                </section>
                <section class="tpf__wrap" aria-describedby="tpf__header-exclude">
                    <div class="tpf__head">
                        <h4 id="tpf__header-exclude">Exclude</h4>
                        <button type="button" class="question" aria-label="help">?</button>
                    </div>
                    <section class="tpf__tag-block exclude characters">
                        <label>
                            <input type="checkbox">
                            <span class="indicator" aria-hidden="true"></span>
                            <span><span class="landmark">Exclude </span>Characters</span>
                        </label>
                        <textarea class="tpf__tag-list" rows="5" autocomplete="off" autocapitalize="off"
                            spellcheck="false"></textarea>
                        <label class="tpf__within">...within the first <input type="text" class="tpf__tag-lim"
                                aria-label="N">
                            tags</label>
                    </section>
                    <section class="tpf__tag-block exclude relationships">
                        <label>
                            <input type="checkbox">
                            <span class="indicator" aria-hidden="true"></span>
                            <span><span class="landmark">Exclude </span>Relationships</span>
                        </label>
                        <textarea class="tpf__tag-list" rows="5" autocomplete="off" autocapitalize="off"
                            spellcheck="false" placeholder="*Ishtar*"></textarea>
                        <label class="tpf__within">...within the first <input type="text" class="tpf__tag-lim">
                            tags</label>
                    </section>
                </section>
                <section class="tpf__settings" aria-describedby="tpf__header-settings">
                    <h3 id="tpf__header-settings" class="landmark">Settings</h3>
                    <fieldset>
                        <legend>
                            Format
                        </legend>
                        <label>
                            <input type="radio" name="format" id="tpf__opt-wildcard" value="wildcard" form=""
                                checked><!--omit from parent form-->
                            <span class="indicator" aria-hidden="true"></span>
                            <span>wildcards (*)</span>
                        </label>
                        <label>
                            <input type="radio" name="format" id="tpf__opt-regex" value="regex"
                                form=""><!--omit from parent form-->
                            <span class="indicator" aria-hidden="true"></span>
                            <span>regex</span>
                        </label>
                        <button type="button" class="question" aria-label="help">?</button>
                    </fieldset>
                </section>
                <section class="actions" aria-describedby="tpf__header-submit">
                    <h3 id="tpf__header-submit" class="landmark">
                        Submit
                    </h3><button class="tpf__apply" type="button">Apply filters</button>
                </section>
                <dl>
                    <dt id="tpf__config-head" class="filter-toggle expanded">
                        <button type="button" class="expander" aria-expanded="false" aria-controls="tpf__config-head"
                            aria-label="Settings">⚙️ Settings</button>
                        <p class="footnote">
                            <a href="#work-filters">Clear Filters</a>
                        </p>
                    </dt>
                    <dd class="tpf__config expandable">
                        <label>
                            <input id="tpf__setting-AO3-sav" type="checkbox">
                            <span class="indicator" aria-hidden="true"></span>
                            <span>AO3 Savior is installed</span>
                        </label>
                        <div class="actions">
                            <button class="save" type="button">Export tag filters to file</button>
                            <button class="load" type="button">Import saved tag filters</button>
                        </div>
                    </dd>
                </dl>
            </dd>
        </dl>
    </fieldset>



    <div class="tpf__menu popup info">
        <section class="head">
            <h3>Tag priority filters</h3>
            <button type="button" class="exit-btn">x</button>
        </section>
        <div class="scrollable">
            <section>
                <p>The script cannot use AO3's tag system, but instead <strong>matches
                        the literal tag text</strong>. <br>
                    Add synonyms where necessary
                    (e.g. <span class="search-term">Naruto Uzumaki, Uzumaki Naruto</span>)</p>
                <ul>
                    <li>Only character and relationship tags are checked.</li>
                    <li>Comma = OR
                        <table class="match-exclude">
                            <thead>
                                <tr>
                                    <th scope="col"></th>
                                    <th scope="col">search term(s)</th>
                                    <th scope="col" class="narrow">N</th>
                                    <th scope="col">result</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>include characters</td>
                                    <td>enkidu, gilgamesh</td>
                                    <td>4</td>
                                    <td>SHOW fics with "Enkidu" OR "Gilgamesh" within the first 4 character tags</td>
                                </tr>
                                <tr>
                                    <td>exclude characters</td>
                                    <td>enkidu, gilgamesh</td>
                                    <td>4</td>
                                    <td>HIDE fics with "Enkidu" OR "Gilgamesh" within the first 4 character tags</td>
                                </tr>
                            </tbody>
                        </table>
                    </li>
                    <li>
                        Search is case-insensitive and ignores diacritics (a = á, ä, ā), line breaks and extra spaces.
                        (Characters like ñ, ł, æ, ø, are letters, not diacritics: searching <span
                            class="search-term">Inigo</span> will match "Ínigo" but not
                        "Íñigo")
                    </li>
                </ul>
                <p>⚠ If you need a blacklist, <a href="https://greasyfork.org/en/scripts/3579-ao3-savior">AO3 savior</a>
                    does it better.</p>
            </section>
            <section>
                <h3>How to filter</h3>
                <p>Choose between <strong>*wildcards</strong> (default) or <strong>regex</strong> (more flexible, for
                    advanced users). <br>
                    Wildcards are enough for most purposes, but NOTE:</p>
                <table class="match-exclude">
                    <thead>
                        <tr>
                            <th scope="col">wildcard (*)</th>
                            <th scope="col">RegExp</th>
                            <th scope="col">matches</th>
                            <th scope="col">excludes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>naruto</td>
                            <td>^naruto$</td>
                            <td>Naruto</td>
                            <td>Naruto Uzumaki, Uzumaki Naruto, Naruto's Evil Clone</td>
                        </tr>
                        <tr>
                            <td>*naruto*</td>
                            <td>naruto</td>
                            <td>Naruto Uzumaki, Uzumaki Naruto, Naruto, Naruto's Evil Clone</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <p>Regex may be useful for...</p>
                <ul>
                    <li>alternate spellings: <span class="search-term">[RL]i[zs]a Hawkeye</span> ➜ Riza/Risa/Liza/Lisa
                        Hawkeye
                    </li>
                    <li>limiting options: <span class="search-term">(Arnold|Ace).*Rimmer</span> ➜ don't match John or
                        Harold
                        Rimmer</li>
                    <li>more control: <span class="search-term">Naruto.*(!clone)</span> ➜ match Naruto but not his clone
                    </li>
                </ul>
                <p>See <a href="https://regexr.com/">https://regexr.com/</a> for more options.</p>
                <h5>Example 1 (with *wildcards)</h5>
                <table>
                    <thead>
                        <tr>
                            <th scope="col">We want…</th>
                            <th scope="col">setting</th>
                            <th scope="col">search term(s)</th>
                            <th scope="col">N</th>
                            <th scope="col">matches</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Fics with Leia in the first 3 character tags</td>
                            <td>Include Characters</td>
                            <td>leia*</td>
                            <td>3</td>
                            <td>Leia, Leia Organa, Leia Skywalker</td>
                        </tr>
                        <tr>
                            <td>…that don't have Luke or Han as the main characters (it's fine if they're in second
                                place)
                            </td>
                            <td>Exclude Characters</td>
                            <td>luke skywalker, han solo</td>
                            <td>4</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <h5>Example 2 (with regex): <br>
                    you don't want to read fics focusing on original
                    characters, but don't mind if they're part of the story.</h5>
                <table>
                    <thead>
                        <tr>
                            <th scope="col">We want…</th>
                            <th scope="col">setting</th>
                            <th scope="col">search term(s)</th>
                            <th scope="col">N</th>
                            <th scope="col">matches</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>to HIDE fics with OCs in first or second place</td>
                            <td>Exclude Characters</td>
                            <td>original.*character, O[FM]?C</td>
                            <td>1</td>
                            <td>Original Characters, Original Female Character, OC, OMC…</td>
                        </tr>
                    </tbody>
                </table>
                <h5>Example 3a (with *wildcards)</h5>
                <table>
                    <thead>
                        <tr>
                            <th scope="col">We want…</th>
                            <th scope="col">setting</th>
                            <th scope="col">search term(s)</th>
                            <th scope="col">N</th>
                            <th scope="col">matches</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Katara/... as the first ship</td>
                            <td>Include Rels.</td>
                            <td>*/*katara*, *katara*/*</td>
                            <td>1</td>
                            <td>Aang / Katara, Katara / Toph, Katara / Zuko...</td>
                        </tr>
                        <tr>
                            <td>...EXCEPT Katara/Aang (okay in the background)</td>
                            <td>Exclude Rels.</td>
                            <td>*aang*/*katara, katara*/*aang*</td>
                            <td>2</td>
                            <td>Aang / Katara, Katara / Aang</td>
                        </tr>
                    </tbody>
                </table>
                <p>Wait! In other fandoms this would work, but Avatar
                    uses "Kataang", "Zutara", etc. <span class="search-term">"kat*, *ara"</span> would match those but
                    also,
                    e.g., "<span class="underline">Kat</span>ara &amp; Sokka". <br>
                    We could list them all, or...
                </p>
                <h5>Example 3b (with regex)</h5>
                <table>
                    <thead>
                        <tr>
                            <th scope="col">We want…</th>
                            <th scope="col">setting</th>
                            <th scope="col">search term(s)</th>
                            <th scope="col">N</th>
                            <th scope="col">matches</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Katara/... as the first ship </td>
                            <td>Include Rels.</td>
                            <td>(!aang).*/.*katara, *katara*/*(!aang), ^kat[a-z]+$</td>
                            <td>1</td>
                            <td>as before, but also "Kat..." followed by any letters without spaces.</td>
                        </tr>
                        <tr>
                            <td>...EXCEPT Katara/Aang (fine if it's in the background)</td>
                            <td>Exclude Rels.</td>
                            <td>*/*katara*, *katara*/*</td>
                            <td>2</td>
                            <td>Aang / Katara, Katara / Aang, Katara / Toph...</td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </div>

    </div>

</body>

</html>

<!--
TODO:
[x] merge old css with new sidebar css
[ ] add error message or icon if the wrong number of tags is selected
[ ] apply button appearance - click animation is unintuitive
    -->